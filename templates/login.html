<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>login</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.0/jquery.js"></script>
</head>
<body>
<form action="" method="post">
    {% csrf_token %}
    <p>用户名：<input type="text" name="name" placeholder="name"></p>
    <p>密码：<input type="password" name="password" placeholder="password"></p>



        <p><label for="">手机号码：</label>
            <input type="text" placeholder="十一位数的手机验证码" name="mobile">

        <p><label for="">验证码：</label>
        <input type="text" name="code" placeholder="请输入手机验证码" style="width: 140px">
        <input type="button" value="获取手机验证码" id="zphone" style="width:100px;margin-left: 10px"></p>



    <p><input type="submit" value="submit"></p>


</form>



<script>
    $(function (){
         $('#zphone').click(function (){
             console.log('22222')
            var mobile=($('input[name="mobile"]')).val()
             console.log(mobile)
             if(mobile!=''&&mobile.length==11){
                 $.getJSON('{% url 'user:send_message' %}',{'mobile':mobile},function (data){
                     if(data.status==200){
                         alert(data.msg)
                     }else {
                         alert(data.msg)
                     }
                 })
             }


    })
    })

</script>

</body>
</html>